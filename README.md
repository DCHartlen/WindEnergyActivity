# Small-Scale Wind Energy Activity

![Turbine CAD Rendering](/ReadmeImages/WindTurbineMockup.png)

## Overview

This activity was developed to introduce students to wind energy and blade design. In terms of hardware, this project consists of a wind turbine upright and hub. The hub has a 1/4" drive shaft to allow students to fasten their blade and hub assemblies. Assemblies are held in place by tightening a wingnut against them. The driveshaft leads to a pulley drive which provides a 4:1 speed increase going into a DC motor. When spun, the DC motor creates a voltage. This voltage is not expected to be more than 1.5 V.

The voltage from the DC motor is read by a microcontroller (Adafruit Itsy Bitsy 32U4 3.3V 8Hz). At present, microcontroller only accepts voltages from 0-3.3V. If the motor is not spinning in the correct direction (creating a negative voltage), the microcontroller will not read any voltage. Flip the blade assembly over and try again.

**NOTE:** If initial testing confirms blade will have a low voltage, a voltage divider will be feed into to the microcontroller's analog reference. This will allow it to pick up voltages from 0-1.6 V in both directions. This is, however, dependent on experimental testing, which has not been accomplished as yet.

The microcontroller is required to be plugged into a computer to operate. Voltage is displayed on an integrated LCD screen and is sent to the computer serially through whatever COM port the microcontroller is attached to.

This particular repository contains the software required to program the microcontroller and the to read in and plot the data. The following sections cover both aspects.

### Microcontroller Source Code
Housed under "ArdunioSourceCode". The microcontroller is programmed using the Arduino language (a derivative of C++), making it easy to adapt. The microcontroller will be preloaded with this source code upon delivery of the project. The microcontroller should not need to be reprogrammed unless changes in operation are required. 

This source code does only three things.

1) Reads in voltage (in bits) and converts to a real-world value (Volts) at 100 Hz
2) Send the voltage to the computer through the serial COM port at 100 Hz
3) Print the voltage to the LCD screen. Only done at 5 Hz to reduce flicker

### Plotting Source Code
A graphical user interface (GUI) was created to plot the data and allow an operator some level of interactivity. This system is based on python 3.6. This GUI requires the following packages to operate:

* PyQt 5: Powers the GUI
* PyQtGraph: Used for plotting
* Numpy: Used for numerical manipulation
* pySerial: Used to read the data coming from the microcontroller

GUI operation is designed to be as simple as possible. Simply plug in the microcontroller, run the python script titled "AquistionScript.py" and the GUI will launch. The software attempts to set all required parameters for the user, so one should only have to hit the start button to begin collecting and plot data. The GUI also tracks the maximum voltage generated by the turbine over a particular run. Hit the stop button to halt collecting and plotting. This does not delete the data. To prepare for another run, hit the reset button. Status and error messages are displayed along the bottom of the GUI.

If plotting does not being after one hits start and an error message is displayed in the GUI status bar, it is likely the software has selected the incorrect COM port used by the microcontroller. A different COM port can be selected by selecting "Select COM Port" under "Options" from the top menu bar. A dialog box is launched listing all available COM ports. By default, this software selects the last one, as this is typically the one Arduino-style microcontrollers communicate with. Simply select an alternate one, hit OK, and attempt to collect data again. Do not attempt to change COM port will collecting data. 

A low-pass filter is applied to all input data to reduce noise in the measured voltage. A simple, first-order low-pass filter which requires only one parameter, beta. By default, beta is set to 0.2, however, it can be changed by selecting "Set Filter Parameters" under "Options". Beta needs to be between 0 and 1. The closer to 0, the more aggressive the filtering applied to the data. Filtering can be adjusted in real-time during plotting.

## License
Project and source code was developed by D.C. Hartlen (2018) for Engineers Nova Scotia. Source code is distributed under the MIT License. Anyone is free to do anything to the code so long as the original copyright is maintained. The developer does not hold any liability.
